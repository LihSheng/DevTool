<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev Tools - JSON Formatter & QueryLog Analyzer</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ†Ô∏è</text></svg>">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="app-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <h1>üõ†Ô∏è</h1>
                    <span>Dev Tools</span>
                </div>
                <label class="toggle-switch dark-mode-toggle">
                    <input type="checkbox" id="dark-mode-toggle">
                    <span class="slider"></span>
                    <span class="toggle-label">üåô</span>
                </label>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-btn active" data-tool="dashboard">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-text">Dashboard</span>
                </button>
                <button class="nav-btn" data-tool="json-formatter">
                    <span class="nav-icon">üìã</span>
                    <span class="nav-text">JSON Formatter</span>
                </button>
                <button class="nav-btn" data-tool="querylog-analyzer">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text">QueryLog Analyzer</span>
                </button>
                <button class="nav-btn" data-tool="vm-connector">
                    <span class="nav-icon">üñ•Ô∏è</span>
                    <span class="nav-text">VM File Connector</span>
                </button>
                <button class="nav-btn" data-tool="json-to-php">
                    <span class="nav-icon">üîÑ</span>
                    <span class="nav-text">JSON to PHP Array</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <small>Clean utilities for developers</small>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">

            <!-- Dashboard -->
            <div id="dashboard" class="tool-panel active">
                <div class="dashboard-container">
                    <div class="dashboard-header">
                        <h2>Welcome to Dev Tools</h2>
                        <p>Your all-in-one developer utilities suite</p>
                    </div>

                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-icon">üìä</div>
                            <div class="stat-info">
                                <div class="stat-number" id="dash-total-uses">0</div>
                                <div class="stat-label">Total Uses</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚≠ê</div>
                            <div class="stat-info">
                                <div class="stat-number" id="dash-most-used">-</div>
                                <div class="stat-label">Most Used Tool</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üïê</div>
                            <div class="stat-info">
                                <div class="stat-number" id="dash-last-used">Never</div>
                                <div class="stat-label">Last Activity</div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-tools">
                        <h3>Quick Access</h3>
                        <div class="tool-cards">
                            <div class="tool-card" data-tool="json-formatter">
                                <div class="tool-card-icon">üìã</div>
                                <div class="tool-card-content">
                                    <h4>JSON Formatter</h4>
                                    <p>Format, validate, and minify JSON data</p>
                                    <div class="tool-card-stats">
                                        <span class="usage-count" id="usage-json-formatter">0 uses</span>
                                    </div>
                                </div>
                            </div>

                            <div class="tool-card" data-tool="querylog-analyzer">
                                <div class="tool-card-icon">üìä</div>
                                <div class="tool-card-content">
                                    <h4>QueryLog Analyzer</h4>
                                    <p>Analyze Laravel database queries and performance</p>
                                    <div class="tool-card-stats">
                                        <span class="usage-count" id="usage-querylog-analyzer">0 uses</span>
                                    </div>
                                </div>
                            </div>

                            <div class="tool-card" data-tool="vm-connector">
                                <div class="tool-card-icon">üñ•Ô∏è</div>
                                <div class="tool-card-content">
                                    <h4>VM File Connector</h4>
                                    <p>Browse and preview files from remote servers</p>
                                    <div class="tool-card-stats">
                                        <span class="usage-count" id="usage-vm-connector">0 uses</span>
                                    </div>
                                </div>
                            </div>

                            <div class="tool-card" data-tool="json-to-php">
                                <div class="tool-card-icon">üîÑ</div>
                                <div class="tool-card-content">
                                    <h4>JSON ‚áÑ PHP Array</h4>
                                    <p>Convert between JSON and PHP array syntax</p>
                                    <div class="tool-card-stats">
                                        <span class="usage-count" id="usage-json-to-php">0 uses</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-footer">
                        <div class="quick-tips">
                            <h3>üí° Quick Tips</h3>
                            <ul>
                                <li>Use <kbd>Ctrl</kbd> + <kbd>Enter</kbd> in JSON/PHP converter for quick conversion</li>
                                <li>QueryLog Analyzer supports both JSON and PHP array formats</li>
                                <li>Bookmark frequently used VM paths for quick access</li>
                                <li>Toggle dark mode with the moon icon in the sidebar</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- JSON Formatter Tool -->
            <div id="json-formatter" class="tool-panel">
                <div class="tool-content json-layout">
                    <div class="input-section">
                        <label for="json-input">Raw JSON:</label>
                        <textarea id="json-input" placeholder="Paste your JSON here..."></textarea>
                        <div class="button-group">
                            <button id="format-json">Format JSON</button>
                            <button id="minify-json">Minify</button>
                            <button id="validate-json">Validate</button>
                            <button id="clear-json">Clear</button>
                        </div>
                    </div>

                    <div class="output-section">
                        <label for="json-output">Formatted JSON:</label>
                        <textarea id="json-output" readonly></textarea>
                        <button id="copy-json">Copy to Clipboard</button>
                    </div>
                </div>

                <div id="json-status" class="status-message"></div>
            </div>

            <!-- QueryLog Analyzer Tool -->
            <div id="querylog-analyzer" class="tool-panel">

                <div class="tool-content querylog-layout">
                    <div class="input-section full-width">
                        <label for="querylog-input">QueryLog Data:</label>
                        <textarea id="querylog-input"
                            placeholder="Paste Laravel QueryLog array or JSON here..."></textarea>
                        <div class="button-group">
                            <button id="analyze-queries">Analyze Queries</button>
                            <button id="clear-querylog">Clear</button>
                            <button id="show-history">History</button>
                            <button id="toggle-querylog-input" title="Collapse QueryLog Data">‚ñ≤</button>
                        </div>
                    </div>

                    <div class="stats-section full-width">
                        <div class="stats-inline">
                            <div class="stat-item">
                                <span class="stat-label">Queries:</span>
                                <span class="stat-value" id="total-queries">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Total:</span>
                                <span class="stat-value" id="total-time">0ms</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Average:</span>
                                <span class="stat-value" id="avg-time">0ms</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Slowest:</span>
                                <span class="stat-value" id="slowest-time">0ms</span>
                            </div>
                        </div>
                    </div>

                    <div class="queries-section full-width">
                        <div class="queries-list">
                            <div class="queries-header">
                                <h3>Query Details</h3>
                                <div class="query-controls-row">
                                    <div class="search-container">
                                        <input type="text" id="query-search" placeholder="Search queries..." class="query-search-input">
                                        <button id="clear-search" class="clear-search-btn" title="Clear search">‚úï</button>
                                    </div>
                                    <div class="query-controls">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="bind-values-toggle" checked>
                                            <span class="slider"></span>
                                            <span class="toggle-label">Show Bound Values</span>
                                        </label>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="sort-by-time-toggle" checked>
                                            <span class="slider"></span>
                                            <span class="toggle-label">Sort by Time</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div id="queries-table"></div>
                        </div>
                    </div>
                </div>

                <div id="querylog-status" class="status-message"></div>
            </div>

            <!-- VM File Connector Tool -->
            <div id="vm-connector" class="tool-panel vm-layout">

                <!-- Compact VM Settings Bar -->
                <div class="vm-settings-bar">
                    <div class="vm-status-compact">
                        <span class="status-indicator">üîó</span>
                        <span id="connection-info">Using default configuration</span>
                    </div>
                    <div class="vm-controls-compact">
                        <button id="toggle-vm-settings" class="settings-toggle-btn">‚öôÔ∏è Settings</button>
                        <button id="reload-defaults" class="secondary-btn">üîÑ</button>
                    </div>
                </div>

                <!-- Collapsible VM Settings -->
                <div id="vm-settings-form" class="vm-settings-form-compact hidden">
                    <div class="settings-grid-compact">
                        <input type="text" id="vm-host" placeholder="Host/IP">
                        <input type="number" id="vm-port" value="22" placeholder="Port">
                        <input type="text" id="vm-username" placeholder="Username">
                        <input type="password" id="vm-password" placeholder="Password">
                    </div>
                </div>

                <!-- Main Content Area -->
                <div class="vm-main-content">
                    <!-- Left Panel: File Browser -->
                    <div class="file-explorer-panel">
                        <div class="explorer-header">
                            <div class="path-navigation">
                                <div class="nav-history-buttons">
                                    <button id="nav-back" class="nav-history-btn" title="Go back" disabled>‚óÄ</button>
                                    <button id="nav-forward" class="nav-history-btn" title="Go forward" disabled>‚ñ∂</button>
                                </div>
                                <input type="text" id="current-directory" value="/" placeholder="/home/user">
                                <div class="path-actions">
                                    <button id="star-path" class="star-btn" title="Bookmark this path">‚òÜ</button>
                                    <button id="bookmarks-dropdown" class="bookmarks-btn" title="View bookmarks">üìë</button>
                                    <button id="browse-directory" class="browse-btn">üìÇ</button>
                                </div>
                            </div>
                        </div>

                        <!-- Bookmarks Panel -->
                        <div id="bookmarks-panel" class="bookmarks-panel hidden">
                            <div class="bookmarks-header">
                                <h4>üìë Bookmarked Paths</h4>
                                <button id="close-bookmarks" class="close-bookmarks-btn">‚úï</button>
                            </div>
                            <div id="bookmarks-list" class="bookmarks-list">
                                <div class="no-bookmarks">No bookmarked paths yet</div>
                            </div>
                        </div>

                        <!-- File Browser -->
                        <div id="file-browser-section" class="file-browser-section">
                            <div id="file-browser" class="file-browser-enhanced">
                                <div class="browser-placeholder">
                                    Click üìÇ to explore directories
                                </div>
                            </div>
                        </div>


                    </div>

                    <!-- Right Panel: File Preview -->
                    <div class="file-preview-panel">
                        <div class="preview-header">
                            <span id="preview-title">Select a file to preview</span>
                            <div class="preview-actions hidden" id="preview-actions">
                                <button id="copy-file-content" class="action-btn">üìã</button>
                                <button id="download-file" class="action-btn">üíæ</button>
                            </div>
                        </div>
                        <div id="vm-file-content" class="file-preview-content">
                            <div class="preview-placeholder">
                                <div class="placeholder-icon">üìÑ</div>
                                <p>No file selected</p>
                                <small>Browse and click on a file to view its contents</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="vm-status" class="status-message"></div>
            </div>

            <!-- JSON ‚áÑ PHP Array Tool -->
            <div id="json-to-php" class="tool-panel">
                <div class="tool-content json-layout">
                    <div class="input-section">
                        <label for="json-to-php-input">
                            <span id="input-label">JSON Input</span>
                        </label>
                        <textarea id="json-to-php-input" placeholder='{"name": "John", "age": 30, "active": true}'></textarea>
                        <div class="button-group">
                            <button id="convert-to-php">Convert ‚Üí</button>
                            <button id="swap-direction" title="Swap conversion direction">‚áÑ</button>
                            <button id="clear-json-php">Clear</button>
                        </div>
                    </div>

                    <div class="output-section">
                        <label for="php-output">
                            <span id="output-label">PHP Array Output</span>
                        </label>
                        <textarea id="php-output" readonly></textarea>
                        <div class="button-group">
                            <button id="copy-php">Copy to Clipboard</button>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- Global Notification Container -->
    <div id="notification-container" class="notification-container"></div>

    <!-- History Modal -->
    <div id="history-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>QueryLog History</h3>
                <button class="modal-close" id="close-history">&times;</button>
            </div>
            <div class="modal-body">
                <div id="history-list" class="history-list">
                    <p class="no-history">No history available</p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="clear-history">Clear All History</button>
            </div>
        </div>
    </div>

    <script src="js/notifications.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/json-formatter.js"></script>
    <script src="js/querylog-analyzer.js"></script>
    <script src="js/vm-connector.js"></script>
    <script src="js/json-to-php.js"></script>
    <script>
        // Navigation functionality
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const toolName = btn.dataset.tool;

                // Update active nav button
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                // Show/hide tool panels
                document.querySelectorAll('.tool-panel').forEach(panel => {
                    panel.classList.remove('active');
                });
                document.getElementById(toolName).classList.add('active');
            });
        });

        // Dark mode functionality
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const body = document.body;

        // Check for saved theme preference or default to dark mode
        const savedTheme = localStorage.getItem('theme') || 'dark';
        if (savedTheme === 'dark') {
            body.setAttribute('data-theme', 'dark');
            darkModeToggle.checked = true;
        }

        darkModeToggle.addEventListener('change', () => {
            if (darkModeToggle.checked) {
                body.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
            } else {
                body.removeAttribute('data-theme');
                localStorage.setItem('theme', 'light');
            }
        });

        // Set dark mode as default on first visit
        if (!localStorage.getItem('theme')) {
            body.setAttribute('data-theme', 'dark');
            darkModeToggle.checked = true;
            localStorage.setItem('theme', 'dark');
        }
    </script>
</body>

</html>